<!-- <!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Panel</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <style>
        body {
            background-color: #343a40;
            color: #fff;
        }
        .navbar {
            margin-bottom: 20px;
        }
        .table th, .table td {
            color: #fff;
        }
        .table thead th {
            border-bottom: 2px solid #dee2e6;
        }
        .btn-primary, .btn-danger {
            margin-right: 5px;
        }
        .card {
            background: rgba(0, 0, 0, 0.5);
        }
        .card-header, .btn-primary {
            color: #fff;
        }
        .form-control {
            background-color: #555;
            border: 1px solid #777;
            color: #fff;
        }
        .form-control:focus {
            background-color: #666;
            border: 1px solid #ffc107;
            color: #fff;
        }
        .btn-primary {
            background-color: #0069d9;
            border-color: #005cbf;
        }
        .btn-primary:hover {
            background-color: #0056b3;
            border-color: #004085;
        }
        .btn-secondary {
            background-color: #6c757d;
            border-color: #6c757d;
        }
        #user-creation-form {
            display: none;
        }
        #user-creation-form h2 {
            color: #ffc107;
        }
    </style>
</head>
<body>
    <header>
        <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
            <a class="navbar-brand" href="#">Admin Panel</a>
            <form class="form-inline ml-auto" action="/search" method="GET">
                <input class="form-control mr-sm-2" type="search" placeholder="Search" aria-label="Search" name="query">
                <button class="btn btn-outline-success my-2 my-sm-0" type="submit">Search</button>
            </form>
            <a href="/create"><button id="create-user-btn" class="btn btn-primary ml-2">Create User</button></a>
            <a href="/logout" class="btn btn-danger ml-2">Logout</a>
        </nav>
    </header>
    
    <main class="container mt-4">
        <section id="user-list">
            <h2>User List</h2>
            {{ if .error }}
            <div class="alert alert-danger mt-2">{{ .error }}</div>
            {{ end }}
            <table class="table">
                <thead>
                    <tr>
                        <th>Full Name</th>
                        <th>Email</th>
                        <th>Super User</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                    {{ range .users }}
                    <tr>
                        <td>{{ .Name }}</td>
                        <td>{{ .Email }}</td>
                        <td>{{ if .IsSuperUser }}Yes{{ else }}No{{ end }}</td>
                        <td>
                            <button class="btn btn-primary btn-sm" onclick="openEditModal('{{ .ID }}', '{{ .Name }}', '{{ .Email }}')">Edit</button>
                            <form method="POST" action="/delete" onsubmit="return confirmDelete();">
                                <input type="hidden" name="user_id" value="{{ .ID }}">
                                <button type="submit" class="btn btn-danger btn-sm">Delete</button>
                            </form>
                        </td>
                    </tr>
                    {{ end }}
                </tbody>
            </table>
        </section>

    </main>


    <div class="modal fade" id="editModal" tabindex="-1" role="dialog" aria-labelledby="editModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="editModalLabel">Edit User</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <form id="editForm" action="/edit" method="POST">
                        <input type="hidden" id="editUserId" name="user_id">
                        <div class="form-group">
                            <label for="editName">Name:</label>
                            <input type="text" class="form-control" id="editName" name="name">
                        </div>
                        <div class="form-group">
                            <label for="editEmail">Email:</label>
                            <input type="email" class="form-control" id="editEmail" name="email">
                        </div>
                        <div class="form-group">
                            <label for="editPassword">Password:</label>
                            <input type="password" class="form-control" id="editPassword" name="password">
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary" onclick="submitEditForm()">Save changes</button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.2/dist/js/bootstrap.bundle.min.js"></script>

    <script>
        function openEditModal(userId, name, email) {
            document.getElementById("editUserId").value = userId;
            document.getElementById("editName").value = name;
            document.getElementById("editEmail").value = email;
            $('#editModal').modal('show');
        }

        function submitEditForm() {
            document.getElementById("editForm").submit();
        }

        function confirmDelete() {
            return confirm("Are you sure you want to delete this user?");
        }
    </script>
</body>
</html> -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Panel</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <style>
        body {
            background-color: #343a40;
            color: #fff;
        }
        .navbar {
            margin-bottom: 20px;
        }
        .table th, .table td {
            color: #fff;
        }
        .table thead th {
            border-bottom: 2px solid #dee2e6;
        }
        .btn-primary, .btn-danger {
            margin-right: 5px;
        }
        .card {
            background: rgba(0, 0, 0, 0.5);
        }
        .card-header, .btn-primary {
            color: #fff;
        }
        .form-control {
            background-color: #555;
            border: 1px solid #777;
            color: #fff;
        }
        .form-control:focus {
            background-color: #666;
            border: 1px solid #ffc107;
            color: #fff;
        }
        .btn-primary {
            background-color: #0069d9;
            border-color: #005cbf;
        }
        .btn-primary:hover {
            background-color: #0056b3;
            border-color: #004085;
        }
        .btn-secondary {
            background-color: #6c757d;
            border-color: #6c757d;
        }
        #user-creation-form {
            display: none;
        }
        #user-creation-form h2 {
            color: #ffc107;
        }
    </style>
 </head>
<body>
    <header>
        <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
            <a class="navbar-brand" href="/admin">Admin Panel</a>
            <form class="form-inline ml-auto" action="/search" method="GET">
                <input class="form-control mr-sm-2" type="search" placeholder="Search" aria-label="Search" name="query">
                <button class="btn btn-outline-success my-2 my-sm-0" type="submit">Search</button>
            </form>
            <a href="/create"><button id="create-user-btn" class="btn btn-primary ml-2">Create User</button></a>
            <a href="/logout" class="btn btn-danger ml-2">Logout</a>
        </nav>
    </header>
    
    <main class="container mt-4">
        <section id="user-list">
            <h2>User List</h2>
            {{ if .Error }}
            <div class="alert alert-danger mt-2">{{ .Error }}</div>
            {{ end }}
            <table class="table">
                <thead>
                    <tr>
                        <th>Full Name</th>
                        <th>Email</th>
                        <th>Super User</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                    {{ range .users }}
                    <tr>
                        <td>{{ .Name }}</td>
                        <td>{{ .Email }}</td>
                        <td>{{ if .IsSuperUser }}Yes{{ else }}No{{ end }}</td>
                        <td>
                            <button class="btn btn-primary btn-sm" onclick="openEditModal('{{ .ID }}', '{{ .Name }}', '{{ .Email }}')">Edit</button>
                            <button class="btn btn-danger btn-sm" onclick="confirmDelete('{{ .ID }}')">Delete</button>
                            <form id="deleteForm-{{ .ID }}" method="POST" action="/delete" style="display: none;">
                                <input type="hidden" name="user_id" value="{{ .ID }}">
                            </form>
                        </td>
                    </tr>
                    {{ end }}
                </tbody>
            </table>
        </section>
    </main>

    <div class="modal fade" id="editModal" tabindex="-1" role="dialog" aria-labelledby="editModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="editModalLabel">Edit User</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                   
                    </button>
                </div>
                <div class="modal-body">
                    <form id="editForm" action="/edit" method="POST">
                        <input type="hidden" id="editUserId" name="user_id">
                        <div class="form-group">
                            <label for="editName">Name:</label>
                            <input type="text" class="form-control" id="editName" name="name">
                            <label for="editEmail">Email:</label>
                            <input type="email" class="form-control" id="editEmail" name="email">
                            <label for="editPassword">Password:</label>
                            <input type="password" class="form-control" id="editPassword" name="password">
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary" onclick="submitEditForm()">Save changes</button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.2/dist/js/bootstrap.bundle.min.js"></script>

    <script>
        function openEditModal(userId, name, email) {
            document.getElementById("editUserId").value = userId;
            document.getElementById("editName").value = name;
            document.getElementById("editEmail").value = email;
            $('#editModal').modal('show');
        }

        function submitEditForm() {
            document.getElementById("editForm").submit();
        }

        function confirmDelete(userId) {
            var result = confirm("Are you sure you want to delete this user?");
            if (result) {
                // User clicked "Yes", proceed with deletion
                document.getElementById("deleteForm-" + userId).submit();
            } else {
                // User clicked "No" or closed the dialog
                // You can add additional handling here if needed
            }
        }
    </script>
</body>
</html>
